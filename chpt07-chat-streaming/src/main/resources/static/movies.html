<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Movies List</title>
    <style>
        .movie { border-bottom: 1px solid #ccc; padding: 10px 0; }
    </style>
</head>
<body>
    <h1>Movies</h1>
    <div id="movie-container">

    </div>

    <button id="start-sse-btn">Start Movie Stream</button>

</body>
<script>
    function startSSE() {
        console.log("Button clicked, starting sse endpoint");
        const eventSource = new EventSource('/movies/stream'); // Your SSE endpoint

         eventSource.onmessage = function(event) {
                // Insert received movie data into the movie container
                document.getElementById('movie-container').insertAdjacentHTML('beforeend', event.data);
            };

            eventSource.onerror = function(event) {
                console.error("EventSource failed:", event);
                eventSource.close(); // Optionally close the connection on error
            };
    }

    // Attach click event to the button to start SSE
    document.getElementById('start-sse-btn').addEventListener('click', startSSE);
</script>
</html>
