<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head th:replace="~{fragments :: page_head('none')}" />
<script th:src="@{/js/property_map.js}"></script>
<script th:src="@{/js/property_general.js}"></script>

<body class="h-screen bg-gray-100" >

<head th:replace="~{navigation :: header_menu}" />

<div class="flex h-[90%] pt-16">

    <!-- Main Content -->
    <main class="flex flex-col bg-white p-4 w-full max-w-full">
        <div id="response-container" class="flex-1 mb-4 p-4 h-full overflow-auto">
            <div th:if="${apartments.isEmpty()}">
                You have no favourite properties.
            </div>

            <div th:replace="~{fragments :: apartments_list('&hearts;')}" />

        </div>

        <!-- Lightbox Modal -->
        <div id="lightbox" style="display: none;" class="lightbox fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" onclick="closeLightbox()">
            <span class="absolute top-4 right-4 text-white text-3xl cursor-pointer" onclick="closeLightbox()">&times;</span>
            <img id="lightbox-img" class="max-w-full max-h-full rounded-lg shadow-lg" />
        </div>

        <div id="mapModal" class="lightbox fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
            <span id="closeMapModal" class="absolute top-4 right-4 text-white text-3xl cursor-pointer">&times;</span>
            <div id="lightbox-map" class="max-w-full max-h-full rounded-lg shadow-lg">
                <iframe
                        id="mapFrame"
                        width="600"
                        height="450"
                        style="border:0"
                        loading="lazy"
                        allowfullscreen
                        referrerpolicy="no-referrer-when-downgrade"
                        src="">
                </iframe>
            </div>
        </div>

    </main>
</div>
<script>
    // Open the lightbox with the clicked image
    function openLightbox(src) {
        document.getElementById('lightbox-img').src = src;
        document.getElementById('lightbox').style.display = 'flex';
    }

    // Close the lightbox
    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
    }
</script>
</body>